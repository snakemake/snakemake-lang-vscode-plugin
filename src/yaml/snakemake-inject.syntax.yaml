---
scopeName: source.python.snakemake.keywords
fileTypes: [Snakefile, smk]
injectionSelector: L:source.python -comment -string, L:meta.function-call.arguments.python -comment -string, L:meta.function-call.python -comment -string

patterns:
  - include: "#classes"
  - include: "#rules-reference"
  - include: "#objects"
  - include: "#job-params.variable"
  - include: "#job-params"
  - include: "#functions"

repository:
  classes:
    match: \b({{classes}})\b(?!\s*=)
    captures:
      "1": { name: entity.name.type.class.snakemake }
  rules-reference:
    name: meta.class.snakemake
    match: \b(rules|checkpoints)\s*\.\s*([A-Za-z_]+)\b(?!\s*=)
    captures:
      "1": { name: entity.name.type.class.snakemake }
      "2": { name: entity.name.variable.snakemake }
  objects:
    name: meta.c
    match: \b({{objects}})\b(?!\s*=)
    captures:
      "1": { name: entity.name.type.class.snakemake }
  job-params.variable:
    name: meta.args.snakemake
    match: \b({{jobparams}})\s*\.\s*([A-Za-z_]+)\b(?!\s*=)
    captures:
      "1": { name: constant.language.snakemake.job }
      "2": { name: entity.name.variable.snakemake }
  job-params:
    match: \b({{jobparams}})\b(?!\s*=)
    captures:
      "1": { name: constant.language.snakemake.job }
  functions:
    match: \b({{functions}})\b(?!\s*=)
    captures:
      "1": { name: support.function.builtin.snakemake }
